# üöÄ –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

## üéØ –ö–†–ê–¢–ö–û –û –ü–†–û–ë–õ–ï–ú–ï
–°–∫—Ä–∏–ø—Ç –ø–∞–¥–∞–µ—Ç –ø–æ—Å–ª–µ 500-600 –ø–æ—Å—Ç–æ–≤ –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏. **–†–µ—à–µ–Ω–∏–µ: –±–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ 100 —Å–æ–æ–±—â–µ–Ω–∏–π**.

## ‚ö° –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**1. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:**
```env
BATCH_SIZE=100
```

**2. –î–æ–±–∞–≤—å—Ç–µ –≤ `config.py` —Å—Ç—Ä–æ–∫—É 39:**
```python
self.batch_size: int = int(os.getenv('BATCH_SIZE', '100'))
```

**3. –ó–∞–º–µ–Ω–∏—Ç–µ –≤ `main.py` —Å—Ç—Ä–æ–∫—É ~343:**
```python
# –ë–´–õ–û:
self.copier = TelegramCopier(...)

# –°–¢–ê–õ–û:
from copier_fixed import TelegramCopierFixed
self.copier = TelegramCopierFixed(..., batch_size=self.config.batch_size)
```

**4. –ó–∞–º–µ–Ω–∏—Ç–µ –≤ `main.py` —Å—Ç—Ä–æ–∫—É ~364:**
```python
# –ë–´–õ–û:
stats = await self.copier.copy_all_messages(resume_from_id)

# –°–¢–ê–õ–û:
stats = await self.copier.copy_all_messages_batch(resume_from_id)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞ —Ñ–∞–π–ª–∞

**1. –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª—ã:**
```bash
mv copier.py copier_original.py
mv copier_fixed.py copier.py
```

**2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –º–µ—Ç–æ–¥—ã –∏–∑ `copier_original.py` –≤ `copier.py`**

**3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ:**
```bash
python main.py
```

## üîß –ù–ê–°–¢–†–û–ô–ö–ò –ë–ê–¢–ß–ï–ô

| –°–∏—Å—Ç–µ–º–∞ | Batch Size | –ü–∞–º—è—Ç—å |
|---------|------------|--------|
| –°–ª–∞–±–∞—è | 25-50 | <512MB |
| –û–±—ã—á–Ω–∞—è | 100 | <1GB |
| –ú–æ—â–Ω–∞—è | 150-200 | <2GB |

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ª—é–±—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ—Å—Ç–æ–≤
- ‚úÖ –ü–∞–º—è—Ç—å –≤—Å–µ–≥–¥–∞ <50MB 
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è
- ‚úÖ –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞

## üÜò –ï–°–õ–ò –ü–†–û–ë–õ–ï–ú–´ –û–°–¢–ê–õ–ò–°–¨

1. –£–º–µ–Ω—å—à–∏—Ç–µ `BATCH_SIZE=25`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å: `free -h`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –º–µ—Å—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –≤ 99% —Å–ª—É—á–∞–µ–≤!**